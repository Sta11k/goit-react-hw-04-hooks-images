(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{14:function(e,t,n){},31:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(9),o=n.n(r),i=(n(30),n(31),n(14),n(13)),s=n(4),u=n(6),l=n(12),b=n.n(l),j=n(23),d=n(24),m=n.n(d),h="20832523-2bf34066ca306390d6c2fd3bb",f="https://pixabay.com/api/",g=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,c=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1,console.log("GetAPI",t),console.log("GetApiPAGE",n),e.next=5,m.a.get("".concat(f,"?q=").concat(t,"&page=").concat(n,"&key=").concat(h,"&image_type=photo&orientation=horizontal&per_page=").concat(12)).then((function(e){return e.data.hits}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={getImages:g},v=n(1);function p(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(s.a)(n,2),r=a[0],o=a[1];return Object(v.jsx)("header",{className:"Searchbar",children:Object(v.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),console.log(" \u043f\u0435\u0440\u0435\u0434 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u043e\u0439",r),t(r.trim().toLowerCase()),o("")},children:[Object(v.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(v.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(v.jsx)("input",{className:"SearchForm-input",type:"text",onChange:function(e){o(e.target.value)},value:r,placeholder:"Search images and photos"})]})})}function x(e){var t=e.handleClick,n=e.image,c=n.webformatURL,a=n.largeImageURL;return Object(v.jsx)("li",{children:Object(v.jsx)("img",{src:c,alt:"",className:"ImageGalleryItem-image",onClick:function(e){return t(e,a)}})})}function w(e){var t=e.arreyImages,n=e.handleClick;return Object(v.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return console.log("FULLIMG",e.largeImageURL),Object(v.jsx)(x,{image:e,handleClick:n},e.id)}))})}function S(e){var t=e.text,n=e.onClick;return Object(v.jsx)("button",{type:"button",className:"Button",onClick:n,children:t})}var I=document.querySelector("#modal-root");function k(e){var t=e.url,n=e.exitModal;return Object(c.useEffect)((function(){var e=function(e){n(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]),Object(r.createPortal)(Object(v.jsx)("div",{className:"Overlay",onClick:n,children:Object(v.jsx)("div",{className:"Modal",children:Object(v.jsx)("img",{src:t,alt:""})})}),I)}n(52);var y=n(25),L=n.n(y),N=function(){return Object(v.jsx)("div",{className:"Loader",children:Object(v.jsx)(L.a,{type:"Grid",color:"#00BFFF",height:60,width:1200})})};function C(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(null),l=Object(s.a)(o,2),b=l[0],j=l[1],d=Object(c.useState)([]),m=Object(s.a)(d,2),h=m[0],f=m[1],g=Object(c.useState)(1),x=Object(s.a)(g,2),I=x[0],y=x[1],L=Object(c.useState)("notInvolved"),C=Object(s.a)(L,2),E=C[0],F=C[1],R=Object(c.useState)(""),U=Object(s.a)(R,2),G=U[0],M=U[1];Object(c.useEffect)((function(){a&&(F("pending"),O.getImages(a,I).then((function(e){if(0===e.length&&1===I)return u.b.error("Nothing found"),void F("notInvolved");if(0===e.length&&I>1)return u.b.error("images is  absent"),void F("notInvolved");var t=e.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}}));f((function(e){return[].concat(Object(i.a)(e),Object(i.a)(t))})),F("resolved")})))}),[a,I]),Object(c.useEffect)((function(){h.length<=12||A()}),[h]);var A=function(){setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},q=function(e){e.target!==e.currentTarget&&"Escape"!==e.code||j((function(e){return!e}))};return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(p,{onSubmit:function(e){""!==e.trim()?(y(1),f([]),r(e)):u.b.error("Invalid request")}}),h.length>0&&Object(v.jsx)(w,{arreyImages:h,handleClick:function(e,t){M(t),q(e),console.log(t),console.log("E",e)}}),"pending"===E&&Object(v.jsx)(N,{}),"resolved"===E&&Object(v.jsx)(S,{onClick:function(){y((function(e){return e+1}))},text:"LOAD MORE..."}),b&&Object(v.jsx)(k,{url:G,exitModal:q}),Object(v.jsx)(u.a,{})]})}o.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.029e1976.chunk.js.map